<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/recursos/template/template.xhtml">

	<ui:define name="tituloPagina">
		 Gerenciar Projeto
	</ui:define>
	<ui:define name="tituloPrincipal">
		<i class="fa fa-align-left"> </i> Gerenciar Projeto</ui:define>
	<ui:define name="tituloSecundario"></ui:define>

	<ui:define name="botoesAcao"></ui:define>

	<ui:insert name="eventos">
		<f:metadata>

			<f:event listener="#{loginBean.validaPagina('Projetos')}"
				type="preRenderView" />

		</f:metadata>
	</ui:insert>

	<ui:define name="conteudo">

		<h:form id="form">

			<p:panel header="Gerenciar Projetos">

				<p:dataTable var="proj" value="#{projetoBean.listarProjeto()}"
					rows="10" paginator="true"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="10, 15, 20">

					<p:column headerText="Nome do Projeto" style="text-align: center;">

						<h:outputText value="#{proj.nomePj}" />

					</p:column>

					<p:column headerText="Gerente de projeto"
						style="text-align: center;">

						<h:outputText value="#{proj.nomeGpPmo}" />

					</p:column>

					<p:column headerText="Data Prevista de Implantação"
						style="text-align: center;">

						<h:outputText
							value="#{dataImplantacaoProjetoBean.listarDatasImplantacaoEspecifico(proj).get(0).dataFormatada}" />

					</p:column>
					
					<p:column headerText="Porcentagem Conclusão"
						style="text-align: center;">

						<h:outputText
							value="#{proj.conclusaoPj}%" />

					</p:column>
					
					<p:column headerText="Status Projeto"
						style="text-align: center;">

						<h:outputText
							value="#{proj.statusFase.nome}" />

					</p:column>

					<p:column style="text-align: center; width: 50px;">

						<p:commandButton update="@form:detatlhesProj"
							oncomplete="PF('infProj').show()" icon="ui-icon-search"
							title="Detalhes do projeto">
							<f:setPropertyActionListener value="#{proj}"
								target="#{projetoBean.projeto}" />
						</p:commandButton>

					</p:column>

				</p:dataTable>

				<p:dialog header="Detalhes do Projeto" widgetVar="infProj"
					modal="true" showEffect="fade" hideEffect="fade" width="500"
					height="300" minHeight="300" minWidth="500">

					<h:panelGroup id="detatlhesProj">

						<p:panelGrid rendered="#{not empty projetoBean.projeto}"
							columnClasses="label, value">

							<p:row>

								<p:column >

									<h:outputText value="Nome do projeto:" style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.nomePj}" />

								</p:column>

							</p:row>

							<p:row>

								<p:column>

									<h:outputText value="Descrição do projeto: " style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.descricao}" />

								</p:column>

							</p:row>

							<p:row>

								<p:column>

									<h:outputText value="Nome GP PMO: " style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.nomeGpPmo}" />

								</p:column>

							</p:row>

							<p:row>

								<p:column>

									<h:outputText value="Nome Focal CO: " style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.nomeFocalCo}" />

								</p:column>

							</p:row>

							<p:row>

								<p:column>

									<h:outputText value="Nome Especialista: " style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.nomeEspecialista}" />

								</p:column>

							</p:row>

							<p:row>

								<p:column>

									<h:outputText value="Areas Envolvidas: " style="font-weight:bold"/>

								</p:column>

								<p:column>

									<h:outputText value="#{projetoBean.projeto.areaEnv}" />

								</p:column>

							</p:row>
							
						</p:panelGrid>
						
						<br/>

						<p:button outcome="detalhesProjeto" value="Modificar" style="float: right;">

							<f:param name="proj" value="#{projetoBean.projeto.id}" />

						</p:button>

					</h:panelGroup>

				</p:dialog>
			</p:panel>

		</h:form>


	</ui:define>
</ui:composition>
</html>